## –ù–∞ —Ñ–æ—Ä–º–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —É—Å–ª—É–≥–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞

–û—Ç–ª–∏—á–Ω–æ, —ç—Ç–æ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ UX-—Ä–µ—à–µ–Ω–∏–µ** üëç
–î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã –≤ —Ñ–æ—Ä–º–µ **–ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –¢–û–õ–¨–ö–û –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞**, –ø—Ä–∏—á—ë–º **–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**.

–ù–∏–∂–µ ‚Äî **—á–∏—Å—Ç–æ–µ –∏ –Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**.

---

# üéØ –ß—Ç–æ –¥–µ–ª–∞–µ–º

–í —Ñ–æ—Ä–º–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç **–≥–æ–¥ + –º–µ—Å—è—Ü**
2. –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥:

    * **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**
    * –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è —ç—Ç–æ–≥–æ –º–µ—Å—è—Ü–∞**
3. –ï—Å–ª–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –Ω–µ—Ç ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ

---

# üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

* üìÑ Backend: **AJAX-—Ä–æ—É—Ç**
* üé® Frontend: **Bootstrap + fetch**
* ‚ùå –ë–µ–∑ Livewire / Vue ‚Äî –ø—Ä–æ—Å—Ç–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

# ‚úÖ –®–ê–ì 1. –†–æ—É—Ç –¥–ª—è AJAX

`routes/web.php`

```php
Route::get('/charges/by-period', [\App\Http\Controllers\ChargeController::class, 'byPeriod'])
    ->name('charges.byPeriod');
```

---

# ‚úÖ –®–ê–ì 2. –ú–µ—Ç–æ–¥ –≤ `ChargeController`

```php
public function byPeriod(Request $request)
{
    $request->validate([
        'apartment_id' => 'required|exists:apartments,id',
        'year'         => 'required|integer',
        'month'        => 'required|integer|min:1|max:12',
    ]);

    $charges = Charge::with('service')
        ->where('apartment_id', $request->apartment_id)
        ->whereYear('period', $request->year)
        ->whereMonth('period', $request->month)
        ->orderBy('service_id')
        ->get();

    return response()->json($charges);
}
```

---

# ‚úÖ –®–ê–ì 3. –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º—É (Blade)

### HTML-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥ —É—Å–ª—É–≥–∏

```blade
<div class="mb-2 fw-bold">–ö –∫–∞–∫–∏–º —É—Å–ª—É–≥–∞–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è:</div>

<div id="charges-container">
    <div class="text-muted">
        –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –∏ –≥–æ–¥
    </div>
</div>
```

---

# ‚úÖ –®–ê–ì 4. JS (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

–î–æ–±–∞–≤—å **–Ω–∏–∂–µ —Ñ–æ—Ä–º—ã** –∏–ª–∏ –≤ layout:

```blade
<script>
document.addEventListener('DOMContentLoaded', () => {

    const apartmentId = {{ $apartment->id }};
    const monthSelect = document.querySelector('select[name="month"]');
    const yearSelect  = document.querySelector('select[name="year"]');
    const container   = document.getElementById('charges-container');

    async function loadCharges() {
        const month = monthSelect.value;
        const year  = yearSelect.value;

        if (!month || !year) {
            container.innerHTML = '<div class="text-muted">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –∏ –≥–æ–¥</div>';
            return;
        }

        container.innerHTML = '<div class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';

        const response = await fetch(
            `{{ route('charges.byPeriod') }}?apartment_id=${apartmentId}&year=${year}&month=${month}`
        );

        const charges = await response.json();

        if (!charges.length) {
            container.innerHTML =
                '<div class="alert alert-warning">–ù–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü –Ω–µ—Ç</div>';
            return;
        }

        container.innerHTML = charges.map(charge => `
            <div class="form-check">
                <input class="form-check-input"
                       type="checkbox"
                       name="charges[]"
                       value="${charge.id}">
                <label class="form-check-label">
                    ${charge.service.name}
                    ‚Äî ${Number(charge.amount).toLocaleString('ru-RU', {
                        minimumFractionDigits: 2
                    })} ‚ÇΩ
                </label>
            </div>
        `).join('');
    }

    monthSelect.addEventListener('change', loadCharges);
    yearSelect.addEventListener('change', loadCharges);
});
</script>
```

---

# üéâ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

‚úî —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ **—Å—Ç—Ä–æ–≥–æ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü**
‚úî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚úî –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
‚úî –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π UX

---

# üîú –û—á–µ–Ω—å –ª–æ–≥–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–æ—Ç–º–µ—á–∞—Ç—å —É—Å–ª—É–≥–∏**, –µ—Å–ª–∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏—è —É–∂–µ –µ—Å—Ç—å
2Ô∏è‚É£ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å **–∏—Ç–æ–≥ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —É—Å–ª—É–≥–∞–º**
3Ô∏è‚É£ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —É—Å–ª—É–≥ **–±–µ–∑ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏**
4Ô∏è‚É£ Drag & Drop –∑–∞–≥—Ä—É–∑–∫–∞ PDF

---

### üëâ –†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–°–¥–µ–ª–∞—Ç—å **–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏** ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —É–¥–æ–±–Ω–æ.

–•–æ—á–µ—à—å ‚Äî —Å–¥–µ–ª–∞–µ–º üëå

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](44.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](46.md)


