## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (—á–∞—Å—Ç—å 4)

`[2025-12-14 10:10:40] local.ERROR: Call to undefined method App\Http\Controllers\ChargeController::show() {"exception":"[object] (Error(code: 0): Call to undefined method`

–û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –≤—Å—ë —è—Å–Ω–æ ‚Äî –æ—à–∏–±–∫–∞ **–Ω–µ –≤ AJAX –∏–ª–∏ JS**, –∞ –≤ **—Ä–æ—É—Ç–∏–Ω–≥–µ Laravel**.

–°–º–æ—Ç—Ä–∏–º –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ:

```
Call to undefined method App\Http\Controllers\ChargeController::show()
```

---

# üîç –ü—Ä–∏—á–∏–Ω–∞

1Ô∏è‚É£ –í `routes/web.php` —É —Ç–µ–±—è –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞, —Ç–∏–ø–∞:

```php
Route::get('/charges/by-period', [ChargeController::class, 'show']);
```

–∏–ª–∏

```php
Route::resource('charges', ChargeController::class);
```

2Ô∏è‚É£ Laravel –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å **–º–µ—Ç–æ–¥ `show()`**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

* `Route::resource()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç 7 –º–µ—Ç–æ–¥–æ–≤: `index, create, store, show, edit, update, destroy`
* **–∞ –º–µ—Ç–æ–¥–∞ `show()` –≤ `ChargeController` –Ω–µ—Ç**

–ò –≤ –∏—Ç–æ–≥–µ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ `/charges/by-period` –æ–Ω –∏—â–µ—Ç `show()`, –Ω–æ –µ–≥–æ –Ω–µ—Ç ‚Üí **500 –æ—à–∏–±–∫–∞**.

---

# ‚úÖ –†–µ—à–µ–Ω–∏–µ

## –í–∞—Ä–∏–∞–Ω—Ç 1: –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥

–í `routes/web.php`:

```php
Route::get('/charges/by-period', [App\Http\Controllers\ChargeController::class, 'byPeriod'])
    ->name('charges.byPeriod');
```

* –ú–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ–ª–∂–µ–Ω –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è `byPeriod(Request $request)`
* –ù–µ `show()`

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `Route::resource`

`Route::resource('charges', ChargeController::class);`

* **–Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å** `/charges/by-period` –∫ `resource`
* –î–æ–±–∞–≤—å **–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–æ—É—Ç –≤—ã—à–µ**:

```php
Route::get('/charges/by-period', [ChargeController::class, 'byPeriod'])
    ->name('charges.byPeriod');
```

* Laravel –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ `byPeriod()`** –¥–ª—è AJAX

---

# üîë –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç

* –ú–µ—Ç–æ–¥ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –¥–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è `byPeriod`:

```php
public function byPeriod(Request $request)
{
    $charges = Charge::with('service')
        ->where('apartment_id', $request->apartment_id)
        ->whereYear('period', $request->year)
        ->whereMonth('period', $request->month)
        ->get();

    return response()->json($charges);
}
```

* –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å `show()`, Laravel –±—É–¥–µ—Ç –æ–∂–∏–¥–∞—Ç—å **ID** –∏ –ø–∞–¥–∞—Ç—å.

---

# ‚ö° –ü—Ä–æ–≤–µ—Ä–∫–∞

1Ô∏è‚É£ –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à —Ä–æ—É—Ç–æ–≤:

```bash
php artisan route:clear
php artisan cache:clear
```

2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

```bash
php artisan route:list | grep charges
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
GET  charges/by-period  charges.byPeriod
```

3Ô∏è‚É£ –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
/charges/by-period?apartment_id=1&year=2025&month=1
```

* –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON –º–∞—Å—Å–∏–≤–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø—Ä–∏—Å–ª–∞—Ç—å **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç `ChargeController` –∏ —Ä–æ—É—Ç–æ–≤**, —á—Ç–æ–±—ã AJAX —Å modal —Ç–æ—á–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞–ª, –±–µ–∑ –æ—à–∏–±–æ–∫ 500.

–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](48.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](50.md)


