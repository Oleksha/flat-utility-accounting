## –î–µ–ª–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –ø–ª–∞—Ç–µ–∂–µ–π

–î–µ–ª–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –ø–ª–∞—Ç–µ–∂–µ–π

–û—Ç–ª–∏—á–Ω–æ, –¥–µ–ª–∞–µ–º üëç
–¢–∞–±–ª–∏—Ü—ã **–ø–ª–∞—Ç–µ–∂–µ–π** –±—É–¥—É—Ç –ª–æ–≥–∏—á–Ω–æ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º, –Ω–æ —Å –Ω—é–∞–Ω—Å–∞–º–∏:

* –¥–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ (–∞ –Ω–µ –ø–µ—Ä–∏–æ–¥)
* —É—Å–ª—É–≥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π
* –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º
* –∏—Ç–æ–≥ –∑–∞ –º–µ—Å—è—Ü
* –¥–µ–π—Å—Ç–≤–∏—è ‚úèÔ∏è üóë

---

## üéØ –ß—Ç–æ –±—É–¥–µ—Ç

–í–æ –≤–∫–ª–∞–¥–∫–µ **üí≥ –ü–ª–∞—Ç–µ–∂–∏**:

* –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ –º–µ—Å—è—Ü–∞–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ–¥–∞
* —Ç–∞–±–ª–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–µ–π
* –∏—Ç–æ–≥ –æ–ø–ª–∞—á–µ–Ω–æ –∑–∞ –º–µ—Å—è—Ü
* –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

---

# ‚úÖ –®–ê–ì 1. Partial —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–ª–∞—Ç–µ–∂–µ–π

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª:

`resources/views/apartments/partials/payments-list.blade.php`

```blade
@forelse($payments as $month => $items)

    <div class="card mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <strong>
                {{ \Carbon\Carbon::createFromFormat('Y-m', $month)->translatedFormat('F Y') }}
            </strong>

            <span class="badge bg-success">
                –û–ø–ª–∞—á–µ–Ω–æ: {{ number_format($items->sum('amount'), 2, ',', ' ') }} ‚ÇΩ
            </span>
        </div>

        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–£—Å–ª—É–≥–∞</th>
                        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                        <th class="text-end">–°—É–º–º–∞</th>
                        <th class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach($items as $payment)
                        <tr>
                            <td>
                                {{ $payment->payment_date->format('d.m.Y') }}
                            </td>
                            <td>
                                {{ $payment->service->name ?? '‚Äî' }}
                            </td>
                            <td class="text-muted">
                                {{ $payment->comment ?? '‚Äî' }}
                            </td>
                            <td class="text-end">
                                {{ number_format($payment->amount, 2, ',', ' ') }} ‚ÇΩ
                            </td>
                            <td class="text-end">

                                <a href="{{ route('payments.edit', $payment) }}"
                                   class="btn btn-sm btn-outline-primary">
                                    ‚úèÔ∏è
                                </a>

                                <form action="{{ route('payments.destroy', $payment) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–ª–∞—Ç—ë–∂?')">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-outline-danger">
                                        üóë
                                    </button>
                                </form>

                            </td>
                        </tr>
                    @endforeach
                </tbody>
            </table>
        </div>
    </div>

@empty
    <p class="text-muted">–ü–ª–∞—Ç–µ–∂–µ–π –∑–∞ {{ $year }} –≥–æ–¥ –Ω–µ—Ç.</p>
@endforelse
```

---

# ‚úÖ –®–ê–ì 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥–µ–ª—å Payment

–í `App\Models\Payment.php`:

```php
protected $casts = [
    'payment_date' => 'date',
];
```

–°–≤—è–∑–∏:

```php
public function service()
{
    return $this->belongsTo(Service::class);
}

public function apartment()
{
    return $this->belongsTo(Apartment::class);
}
```

---

# ‚úÖ –®–ê–ì 3. –î–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ)

–í `ApartmentController@show` —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å:

```php
$payments = $apartment->payments
    ->filter(fn($p) => $p->payment_date->year == $year)
    ->sortBy('payment_date')
    ->groupBy(fn($p) => $p->payment_date->format('Y-m'));
```

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–∞–±–ª–∏—Ü.

---

# üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å UX —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤—ã–≥–ª—è–¥–∏—Ç **–∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–±–∏–Ω–µ—Ç**:

‚úî –≤–∫–ª–∞–¥–∫–∏
‚úî –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
‚úî –∏—Ç–æ–≥–∏ –ø–æ –º–µ—Å—è—Ü–∞–º
‚úî –¥–µ–π—Å—Ç–≤–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è
‚úî –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å

---

## üîú –ß—Ç–æ –¥–µ–ª–∞–µ–º –¥–∞–ª—å—à–µ?

–õ–æ–≥–∏—á–Ω—ã–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—Ä—è–¥–æ–∫):

1Ô∏è‚É£ **–§–æ—Ä–º—ã –ø–ª–∞—Ç–µ–∂–µ–π** (create / edit, –∫–∞–∫ —É –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π)
2Ô∏è‚É£ –ê–≤—Ç–æ—Ä–∞—Å—á—ë—Ç –¥–æ–ª–≥–∞ –ø–æ —É—Å–ª—É–≥–∞–º
3Ô∏è‚É£ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel / PDF
4Ô∏è‚É£ –§–∏–ª—å—Ç—Ä—ã –ø–æ —É—Å–ª—É–≥–∞–º
5Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏

–ù–∞–ø–∏—à–∏ –Ω–æ–º–µ—Ä –ø—É–Ω–∫—Ç–∞ –∏–ª–∏ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º üöÄ

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](29.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](31.md)


