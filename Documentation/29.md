## –î–µ–ª–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

–î–µ–ª–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

–û—Ç–ª–∏—á–Ω–æ üëç
–î–µ–ª–∞–µ–º **–∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ, —É–¥–æ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä—ã–µ:

* –ª–æ–≥–∏—á–Ω–æ —á–∏—Ç–∞—é—Ç—Å—è
* —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –º–µ—Å—è—Ü–∞–º
* –∏–º–µ—é—Ç –∫–Ω–æ–ø–∫–∏ ‚úèÔ∏è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å / üóë —É–¥–∞–ª–∏—Ç—å
* –Ω–µ –ª–æ–º–∞—é—Ç—Å—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç
* –≤—ã–≥–ª—è–¥—è—Ç ¬´–ø–æ-–≤–∑—Ä–æ—Å–ª–æ–º—É¬ª

---

## üéØ –ß—Ç–æ –±—É–¥–µ—Ç –≤ –∏—Ç–æ–≥–µ

–í–æ –≤–∫–ª–∞–¥–∫–µ **üìÑ –ù–∞—á–∏—Å–ª–µ–Ω–∏—è**:

* —Ç–∞–±–ª–∏—Ü—ã –ø–æ –º–µ—Å—è—Ü–∞–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ–¥–∞
* –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ:

    * –¥–∞—Ç–∞ (–ø–µ—Ä–∏–æ–¥)
    * —É—Å–ª—É–≥–∞
    * –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
    * —Å—É–º–º–∞
    * –¥–µ–π—Å—Ç–≤–∏—è
* –∏—Ç–æ–≥ –∑–∞ –º–µ—Å—è—Ü
* –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

---

# ‚úÖ –®–ê–ì 1. Partial —Å–æ —Å–ø–∏—Å–∫–æ–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª:

`resources/views/apartments/partials/charges-list.blade.php`

```blade
@forelse($charges as $month => $items)

    <div class="card mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <strong>
                {{ \Carbon\Carbon::createFromFormat('Y-m', $month)->translatedFormat('F Y') }}
            </strong>

            <span class="badge bg-secondary">
                –ò—Ç–æ–≥–æ: {{ number_format($items->sum('amount'), 2, ',', ' ') }} ‚ÇΩ
            </span>
        </div>

        <div class="table-responsive">
            <table class="table table-sm table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>–£—Å–ª—É–≥–∞</th>
                        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                        <th class="text-end">–°—É–º–º–∞</th>
                        <th class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach($items as $charge)
                        <tr>
                            <td>{{ $charge->service->name }}</td>
                            <td class="text-muted">
                                {{ $charge->comment ?? '‚Äî' }}
                            </td>
                            <td class="text-end">
                                {{ number_format($charge->amount, 2, ',', ' ') }} ‚ÇΩ
                            </td>
                            <td class="text-end">

                                <a href="{{ route('charges.edit', $charge) }}"
                                   class="btn btn-sm btn-outline-primary">
                                    ‚úèÔ∏è
                                </a>

                                <form action="{{ route('charges.destroy', $charge) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ?')">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-outline-danger">
                                        üóë
                                    </button>
                                </form>

                            </td>
                        </tr>
                    @endforeach
                </tbody>
            </table>
        </div>
    </div>

@empty
    <p class="text-muted">–ù–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ {{ $year }} –≥–æ–¥ –Ω–µ—Ç.</p>
@endforelse
```

---

# ‚úÖ –®–ê–ì 2. –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

–í `ApartmentController@show` —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å:

```php
$charges = $apartment->charges
    ->filter(fn($c) => $c->period->year == $year)
    ->sortBy('period')
    ->groupBy(fn($c) => $c->period->format('Y-m'));
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
–í –º–æ–¥–µ–ª–∏ `Charge` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```php
protected $casts = [
    'period' => 'date',
];
```

–ò —Å–≤—è–∑—å:

```php
public function service()
{
    return $this->belongsTo(Service::class);
}
```

---

# ‚úÖ –®–ê–ì 3. UX-–º–µ–ª–æ—á–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

### üîπ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Å—É–º–º

(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –∫—Ä–∞—Å–∏–≤–æ)

```blade
<td class="text-end {{ $charge->amount > 5000 ? 'fw-bold text-danger' : '' }}">
```

---

# üîú –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–¢–µ–ø–µ—Ä—å –≤–∫–ª–∞–¥–∫–∞ **–ù–∞—á–∏—Å–ª–µ–Ω–∏—è** –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ üí™

üëâ **–°–ª–µ–¥—É—é—â–µ–µ –ª–æ–≥–∏—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ** ‚Äî —Å–¥–µ–ª–∞—Ç—å **—Ç–∞–±–ª–∏—Ü—ã –ø–ª–∞—Ç–µ–∂–µ–π** (–æ–Ω–∏ –ø–æ—á—Ç–∏ —Ç–∞–∫–∏–µ –∂–µ, –Ω–æ —Å –¥–∞—Ç–æ–π –ø–ª–∞—Ç–µ–∂–∞).

–•–æ—á–µ—à—å ‚Äî —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞–µ–º **–ø–ª–∞—Ç–µ–∂–∏** –∏–ª–∏ —Å–Ω–∞—á–∞–ª–∞:

* –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ —É—Å–ª—É–≥–µ?
* –¥–æ–±–∞–≤–∏—Ç—å inline-–∏—Ç–æ–≥–∏?
* —Å–¥–µ–ª–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É?

–ù–∞–ø–∏—à–∏, —á—Ç–æ –¥–µ–ª–∞–µ–º –¥–∞–ª—å—à–µ üëá

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](28.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](30.md)


