## –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ

–ù—É–∂–Ω–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ

–ß—Ç–æ–±—ã –≥—Ä—É–ø–ø—ã **–±—ã–ª–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –∏–ª–∏ —É–±—ã–≤–∞–Ω–∏—é)**, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É **–ø–µ—Ä–µ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π** –∏–ª–∏ **–ø–æ—Å–ª–µ**.

Laravel Collection –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–æ.

---

# ‚úÖ **–í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –î–û –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏**

–≠—Ç–æ —Å–∞–º—ã–π —á–∏—Å—Ç—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–±.

```php
public function show(Apartment $apartment)
{
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø–æ period
    $chargesGrouped = $apartment->charges
        ->sortBy('period')
        ->groupBy(fn($charge) => $charge->period->format('Y-m'));

    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–ª–∞—Ç–µ–∂–∏ –ø–æ payment_date
    $paymentsGrouped = $apartment->payments
        ->sortBy('payment_date')
        ->groupBy(fn($payment) => $payment->payment_date->format('Y-m'));

    return view('apartments.show', compact('apartment', 'chargesGrouped', 'paymentsGrouped'));
}
```

### ‚úî –ì—Ä—É–ø–ø—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ –≤ –ø–æ—Ä—è–¥–∫–µ:

```
2024-01
2024-02
2024-03
...
2025-01
2025-02
```

---

# ‚ú® **–í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≥—Ä—É–ø–ø –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏**

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∫–ª—é—á—É `'Y-m'`:

```php
$chargesGrouped = $apartment->charges
    ->groupBy(fn($c) => $c->period->format('Y-m'))
    ->sortKeys();
```

–î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é:

```php
->sortKeysDesc()
```

---

# üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç 1

–ü–æ—á–µ–º—É:

* —Å–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã (Carbon), –∞ –Ω–µ —Å—Ç—Ä–æ–∫–∏
* –≥—Ä—É–ø–ø—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º
* –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã —Ç–æ–∂–µ –ø–æ—Ä—è–¥–æ–∫ –ø–æ –¥–∞—Ç–µ

---

# üéÅ –ì–æ—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ (–ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)

```php
public function show(Apartment $apartment)
{
    $chargesGrouped = $apartment->charges
        ->sortBy('period')
        ->groupBy(fn($c) => $c->period->format('Y-m'));

    $paymentsGrouped = $apartment->payments
        ->sortBy('payment_date')
        ->groupBy(fn($p) => $p->payment_date->format('Y-m'));

    return view('apartments.show', compact('apartment', 'chargesGrouped', 'paymentsGrouped'));
}
```

---

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –æ–±–Ω–æ–≤–∏—Ç—å Blade-—à–∞–±–ª–æ–Ω, —á—Ç–æ–±—ã –æ–Ω –≤—ã–≤–æ–¥–∏–ª –¥–∞–Ω–Ω—ã–µ –∫—Ä–∞—Å–∏–≤–æ –ø–æ –º–µ—Å—è—Ü–∞–º –∏ –≥–æ–¥–∞–º?

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](22.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](24.md)


