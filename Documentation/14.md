## Формирование тестовых данных

Давай сначала сформируем тестовые данные для наглядности.

Отлично! Давай создадим **тестовые данные** для квартир, поставщиков, услуг, тарифов, начислений и платежей, чтобы сразу видеть интерфейс с реальными цифрами.

Я предлагаю использовать **Laravel Seeder** для генерации данных.

---

# **1. Создаем Seeder**

Выполни в терминале:

```bash
php artisan make:seeder TestDataSeeder
```

Это создаст файл `database/seeders/TestDataSeeder.php`.

---

# **2. Наполняем Seeder**

```php
<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Apartment;
use App\Models\Provider;
use App\Models\Service;
use App\Models\Rate;
use App\Models\Charge;
use App\Models\Payment;
use Carbon\Carbon;

class TestDataSeeder extends Seeder
{
    public function run()
    {
        // ------------------
        // Услуги
        // ------------------
        $services = ['Содержание', 'Вода', 'Свет', 'Вывоз мусора', 'Интернет', 'Домофон', 'Отопление', 'Газ'];
        foreach ($services as $service) {
            Service::create(['name' => $service]);
        }

        // ------------------
        // Поставщики
        // ------------------
        $providers = [
            ['name' => 'Поставщик воды', 'phone' => '111111', 'email' => 'water@example.com', 'site_url' => 'https://water.example.com'],
            ['name' => 'Энергосбыт', 'phone' => '222222', 'email' => 'electric@example.com', 'site_url' => 'https://electric.example.com'],
            ['name' => 'Интернет-провайдер', 'phone' => '333333', 'email' => 'internet@example.com', 'site_url' => 'https://internet.example.com'],
        ];
        foreach ($providers as $p) {
            Provider::create($p);
        }

        // ------------------
        // Квартиры
        // ------------------
        $apartments = [
            ['name' => 'Квартира 1', 'address' => 'ул. Пушкина, д.1'],
            ['name' => 'Квартира 2', 'address' => 'ул. Лермонтова, д.2'],
        ];
        foreach ($apartments as $a) {
            Apartment::create($a);
        }

        // ------------------
        // Тарифы
        // ------------------
        $allApartments = Apartment::all();
        $allProviders = Provider::all();
        $allServices = Service::all();

        foreach ($allApartments as $apartment) {
            foreach ($allServices as $service) {
                $provider = $allProviders->random();
                Rate::create([
                    'apartment_id' => $apartment->id,
                    'provider_id' => $provider->id,
                    'service_id' => $service->id,
                    'price' => rand(100, 1000),
                    'type' => 'fixed',
                    'start_date' => Carbon::now()->subMonths(rand(0, 6)),
                ]);
            }
        }

        // ------------------
        // Начисления (Charges)
        // ------------------
        foreach ($allApartments as $apartment) {
            foreach ($allServices as $service) {
                for ($i = 0; $i < 3; $i++) {
                    Charge::create([
                        'apartment_id' => $apartment->id,
                        'service_id' => $service->id,
                        'amount' => rand(100, 1000),
                        'period' => Carbon::now()->subMonths($i),
                        'comment' => 'Тестовое начисление',
                    ]);
                }
            }
        }

        // ------------------
        // Платежи (Payments)
        // ------------------
        foreach ($allApartments as $apartment) {
            for ($i = 0; $i < 5; $i++) {
                Payment::create([
                    'apartment_id' => $apartment->id,
                    'amount' => rand(500, 3000),
                    'payment_date' => Carbon::now()->subDays($i * 10),
                    'comment' => 'Тестовый платеж',
                ]);
            }
        }
    }
}
```

---

# **3. Запускаем Seeder**

В `DatabaseSeeder.php` добавь вызов нашего сидера:

```php
public function run()
{
    $this->call(TestDataSeeder::class);
}
```

Затем в терминале:

```bash
php artisan migrate:fresh --seed
```

Это создаст **тестовые квартиры, услуги, поставщиков, тарифы, начисления и платежи**.

---

После этого на странице квартиры можно будет увидеть:

* Реальные суммы начислений и платежей.
* Баланс квартиры.
* Модальные окна для добавления новых начислений и платежей.

---

Если хочешь, следующим шагом я могу **добавить цветовую индикацию баланса: красный — долг, зелёный — положительный**, чтобы сразу видеть финансовое состояние квартиры.

Хочешь, чтобы я это сделал?

---

[Предыдущая часть](13.md) | [Содержание](01.md) | [Следующая часть](15.md)


