## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (—á–∞—Å—Ç—å 1)

–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –£ –º–µ–Ω—è Modal —Å —Ñ–æ—Ä–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–∏–¥–µ apartment/show.blade. –ü–æ–∫–∞–∂–∏ –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ñ–æ—Ä–º–∞ –≤–º–µ—Å—Ç–µ —Å js

–û—Ç–ª–∏—á–Ω–æ, –¥–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º **—Ä–∞–±–æ—á–∏–π, —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä**, –∏–º–µ–Ω–Ω–æ –ø–æ–¥ —Ç–≤–æ–π –∫–µ–π—Å:

* ‚úÖ `Modal` **–≤–Ω—É—Ç—Ä–∏** `apartments/show.blade.php`
* ‚úÖ –±–µ–∑ Vue / Livewire
* ‚úÖ —á–∏—Å—Ç—ã–π Bootstrap + JS
* ‚úÖ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ù–∏–∂–µ ‚Äî **–ö–û–î –¶–ï–õ–ò–ö–û–ú**, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.

---

# ‚úÖ –ü–û–õ–ù–´–ô –ö–û–î MODAL + JS

üìÑ `resources/views/apartments/show.blade.php`

---

## üîò –ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)

```blade
<button class="btn btn-outline-secondary"
        data-bs-toggle="modal"
        data-bs-target="#uploadReceiptModal">
    üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏—é
</button>
```

---

## üßæ Modal —Å —Ñ–æ—Ä–º–æ–π

```blade
<div class="modal fade" id="uploadReceiptModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <form method="POST"
                  action="{{ route('receipts.store') }}"
                  enctype="multipart/form-data">
                @csrf

                <div class="modal-header">
                    <h5 class="modal-title">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏</h5>
                    <button type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">

                    {{-- ID –∫–≤–∞—Ä—Ç–∏—Ä—ã --}}
                    <input type="hidden"
                           name="apartment_id"
                           value="{{ $apartment->id }}">

                    {{-- –ü–µ—Ä–∏–æ–¥ --}}
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">–ú–µ—Å—è—Ü</label>
                            <select name="month"
                                    id="receipt-month"
                                    class="form-select"
                                    required>
                                <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
                                @foreach(range(1,12) as $m)
                                    <option value="{{ $m }}">
                                        {{ \Carbon\Carbon::create()->month($m)->translatedFormat('F') }}
                                    </option>
                                @endforeach
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">–ì–æ–¥</label>
                            <select name="year"
                                    id="receipt-year"
                                    class="form-select"
                                    required>
                                <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
                                @foreach(range(now()->year, now()->year - 5) as $y)
                                    <option value="{{ $y }}">{{ $y }}</option>
                                @endforeach
                            </select>
                        </div>
                    </div>

                    {{-- PDF --}}
                    <div class="mb-3">
                        <label class="form-label">PDF-–∫–≤–∏—Ç–∞–Ω—Ü–∏—è</label>
                        <input type="file"
                               name="file"
                               accept="application/pdf"
                               class="form-control"
                               required>
                    </div>

                    {{-- –£—Å–ª—É–≥–∏ --}}
                    <div class="mb-2 fw-bold">
                        –ö –∫–∞–∫–∏–º —É—Å–ª—É–≥–∞–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è
                    </div>

                    <div id="charges-container">
                        <div class="text-muted">
                            –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –∏ –≥–æ–¥
                        </div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal">
                        –û—Ç–º–µ–Ω–∞
                    </button>

                    <button class="btn btn-primary">
                        –ó–∞–≥—Ä—É–∑–∏—Ç—å
                    </button>
                </div>

            </form>

        </div>
    </div>
</div>
```

---

## üß† JS (–í–°–¢–ê–í–¨ –í –ö–û–ù–ï–¶ –≠–¢–û–ì–û –ñ–ï –§–ê–ô–õ–ê)

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–ø–æ—Å–ª–µ modal**

```blade
<script>
document.addEventListener('DOMContentLoaded', function () {

    const apartmentId = {{ $apartment->id }};
    const monthSelect = document.getElementById('receipt-month');
    const yearSelect  = document.getElementById('receipt-year');
    const container   = document.getElementById('charges-container');

    async function loadCharges() {

        const month = monthSelect.value;
        const year  = yearSelect.value;

        if (!month || !year) {
            container.innerHTML =
                '<div class="text-muted">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –∏ –≥–æ–¥</div>';
            return;
        }

        container.innerHTML =
            '<div class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';

        try {
            const response = await fetch(
                `{{ route('charges.byPeriod') }}`
                + `?apartment_id=${apartmentId}`
                + `&year=${year}`
                + `&month=${month}`
            );

            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
            }

            const charges = await response.json();

            if (!charges.length) {
                container.innerHTML =
                    '<div class="alert alert-warning mb-0">'
                    + '–ù–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü –Ω–µ—Ç'
                    + '</div>';
                return;
            }

            container.innerHTML = charges.map(charge => `
                <div class="form-check">
                    <input class="form-check-input"
                           type="checkbox"
                           name="charges[]"
                           value="${charge.id}">
                    <label class="form-check-label">
                        ${charge.service.name}
                        ‚Äî ${Number(charge.amount).toLocaleString('ru-RU', {
                            minimumFractionDigits: 2
                        })} ‚ÇΩ
                    </label>
                </div>
            `).join('');

        } catch (e) {
            container.innerHTML =
                '<div class="alert alert-danger mb-0">'
                + '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥'
                + '</div>';
        }
    }

    monthSelect.addEventListener('change', loadCharges);
    yearSelect.addEventListener('change', loadCharges);
});
</script>
```

---

# üß™ –ü–†–û–í–ï–†–¨ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û

1Ô∏è‚É£ –ï—Å—Ç—å –ª–∏ —Ä–æ—É—Ç:

```bash
php artisan route:list | grep charges.byPeriod
```

2Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏ JSON:

```
/charges/by-period?apartment_id=1&year=2025&month=1
```

3Ô∏è‚É£ –í `ChargeController@byPeriod` –µ—Å—Ç—å `->with('service')`

---

# üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

‚úî —Ñ–æ—Ä–º–∞ –≤ `Modal`
‚úî —É—Å–ª—É–≥–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –º–µ—Å—è—Ü—É
‚úî –Ω–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
‚úî UX –∫–∞–∫ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö –±–∏–ª–ª–∏–Ω–≥–∞—Ö

---

## üîú –°–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥

* üî¢ **–ü–æ–∫–∞–∑ —Å—É–º–º—ã –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥**
* ‚úî –∞–≤—Ç–æ–≥–∞–ª–æ—á–∫–∞, –µ—Å–ª–∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏—è —É–∂–µ –µ—Å—Ç—å
* üìÑ —Å–ø–∏—Å–æ–∫ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π –ø–æ–¥ —Ç–∞–±–ª–∏—Ü–µ–π –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

–•–æ—á–µ—à—å ‚Äî –∏–¥—ë–º –¥–∞–ª—å—à–µ üëå

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](45.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](47.md)


