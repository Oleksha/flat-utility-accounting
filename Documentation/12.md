## Главная страница квартиры с панелью баланса, начислениями и платежами в виде карточек

Хочу.

Отлично! Давай сделаем **главную страницу квартиры с панелью баланса, начислениями и платежами в виде карточек**. Это сделает интерфейс более наглядным и удобным.

---

# **1. Шаблон просмотра квартиры: `apartments/show.blade.php`**

```blade
@extends('layouts.app')

@section('content')
<h1>Квартира: {{ $apartment->name }}</h1>
<p><strong>Адрес:</strong> {{ $apartment->address }}</p>

<!-- Баланс -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="card text-white bg-primary mb-3">
            <div class="card-header">Баланс</div>
            <div class="card-body">
                <h3 class="card-title">
                    {{ $apartment->charges->sum('amount') - $apartment->payments->sum('amount') }} ₽
                </h3>
                <p class="card-text">Начисления минус платежи</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-header">Начисления</div>
            <div class="card-body">
                <h3 class="card-title">{{ $apartment->charges->sum('amount') }} ₽</h3>
                <p class="card-text">Сумма начислений</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-warning mb-3">
            <div class="card-header">Платежи</div>
            <div class="card-body">
                <h3 class="card-title">{{ $apartment->payments->sum('amount') }} ₽</h3>
                <p class="card-text">Сумма платежей</p>
            </div>
        </div>
    </div>
</div>

<!-- Начисления -->
<h3>Начисления</h3>
<table class="table table-sm table-striped mb-4">
    <thead class="table-dark">
        <tr>
            <th>Услуга</th>
            <th>Сумма</th>
            <th>Период</th>
            <th>Комментарий</th>
        </tr>
    </thead>
    <tbody>
        @foreach($apartment->charges as $charge)
        <tr>
            <td>{{ $charge->service->name }}</td>
            <td>{{ $charge->amount }} ₽</td>
            <td>{{ $charge->period->format('m.Y') }}</td>
            <td>{{ $charge->comment }}</td>
        </tr>
        @endforeach
    </tbody>
</table>

<!-- Платежи -->
<h3>Платежи</h3>
<table class="table table-sm table-striped">
    <thead class="table-dark">
        <tr>
            <th>Сумма</th>
            <th>Дата</th>
            <th>Комментарий</th>
        </tr>
    </thead>
    <tbody>
        @foreach($apartment->payments as $payment)
        <tr>
            <td>{{ $payment->amount }} ₽</td>
            <td>{{ $payment->payment_date->format('d.m.Y') }}</td>
            <td>{{ $payment->comment }}</td>
        </tr>
        @endforeach
    </tbody>
</table>

<a class="btn btn-primary mt-3" href="{{ route('apartments.index') }}">Назад</a>
@endsection
```

---

# **2. Улучшения интерфейса**

* **Карточки сверху** показывают **Баланс**, **Начисления** и **Платежи**. Цвета для наглядности:

    * Баланс: синий (`bg-primary`)
    * Начисления: зелёный (`bg-success`)
    * Платежи: жёлтый (`bg-warning`)

* **Таблицы снизу** показывают детальную информацию по начислениям и платежам.

* **Форматирование дат и сумм** через Carbon и рубли для удобства восприятия.

* Можно позже добавить **кнопки “Добавить начисление/платеж” прямо из карточек**, чтобы всё было на одной странице.

---

Если хочешь, я могу сделать **дополнительно кнопки “Добавить начисление” и “Добавить платеж” прямо на странице квартиры**, чтобы можно было вести учет полностью с одной страницы.

Хочешь, чтобы я это сделал?

---

[Предыдущая часть](11.md) | [Содержание](01.md) | [Следующая часть](13.md)


