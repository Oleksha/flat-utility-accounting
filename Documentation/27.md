## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (—á–∞—Å—Ç—å 2)


```
app\Http\Controllers\ApartmentController.php:103

102        $chargesGraph = collect($labels)
103            ->map(fn($m) => $charges[$m]->sum('amount') ?? 0)
104            ->toArray();
```

–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –ø–æ—Ä—è–¥–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —ç—Ç–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏:

```php
$charges[$m]->sum('amount') ?? 0
```

–û–ø–µ—Ä–∞—Ç–æ—Ä `->` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Ä–∞–Ω—å—à–µ**, —á–µ–º `??`, –ø–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ `$charges[$m]` **–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ø—ã—Ç–∫–∞ –≤—ã–∑–≤–∞—Ç—å `sum()` –Ω–∞ `null`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç:

```
Error: Call to a member function sum() on null
```

---

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç—å `?? collect()`

–ù—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:

```php
$chargesGraph = collect($labels)
    ->map(fn($m) => ($charges[$m] ?? collect())->sum('amount'))
    ->toArray();
```

–¢–æ –∂–µ —Å–∞–º–æ–µ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –¥–ª—è payments:

```php
$paymentsGraph = collect($labels)
    ->map(fn($m) => ($payments[$m] ?? collect())->sum('amount'))
    ->toArray();
```

---

# üìå –ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç

`$charges[$m] ?? collect()`
‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ –º–µ—Å—è—Ü –∏–ª–∏ –ø—É—Å—Ç—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –º–µ—Ç–æ–¥ `sum()` –±—É–¥–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å.

---

# ‚úî –ü–æ–ª–Ω—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞

```php
$labels = collect(range(1, 12))
    ->map(fn($m) => sprintf('%02d', $m))
    ->map(fn($m) => "$year-$m")
    ->toArray();

$chargesGraph = collect($labels)
    ->map(fn($m) => ($charges[$m] ?? collect())->sum('amount'))
    ->toArray();

$paymentsGraph = collect($labels)
    ->map(fn($m) => ($payments[$m] ?? collect())->sum('amount'))
    ->toArray();
```

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ –µ–¥–∏–Ω—ã–π, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –º–µ—Ç–æ–¥ `show()`, –≤–∫–ª—é—á–∞—è:

‚úÖ –≥—Ä–∞—Ñ–∏–∫–∏
‚úÖ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –≥–æ–¥–∞–º
‚úÖ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ –∏—Ç–æ–≥–∏ –∑–∞ –≥–æ–¥
‚úÖ Blade-—à–∞–±–ª–æ–Ω

–°–∫–∞–∑–∞—Ç—å ¬´—Ö–æ—á—É¬ª ‚Äî –∏ —è –æ—Ñ–æ—Ä–º–ª—é –≤—Å—ë —Å—Ä–∞–∑—É.

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](26.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](28.md)


