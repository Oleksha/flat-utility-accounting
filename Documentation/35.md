## –£–ª—É—á—à–∞–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º

–í —Ñ–æ—Ä–º–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ù–∞—á–∏—Å–ª–µ–Ω–∏–π –∏ –ü–ª–∞—Ç–µ–∂–µ–π –º–Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥. –ú–æ–∂–Ω–æ –∫–∞–∫-—Ç–æ —ç—Ç–æ —É–ª—É—á—à–∏—Ç—å?

–î–∞, —ç—Ç–æ **–æ—á–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å** üëç
–ò –¥–∞ ‚Äî —ç—Ç–æ –º–æ–∂–Ω–æ (–∏ –Ω—É–∂–Ω–æ) —Å–¥–µ–ª–∞—Ç—å **–≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ –∏ ‚Äú–ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏‚Äù**.

–ù–∏–∂–µ ‚Äî **–ª—É—á—à–µ–µ UX-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ñ–ö–•-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∞–Ω–∫–∏ –∏ –±–∏–ª–ª–∏–Ω–≥–∏.

---

## üéØ –ò–¥–µ—è (–∫–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å)

‚ùå –°–µ–π—á–∞—Å:
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é –≤–≤–æ–¥–∏—Ç **–¥–∞—Ç—É / –ø–µ—Ä–∏–æ–¥** ‚Üí –æ—à–∏–±–∫–∏, –ª–∏—à–Ω–∏–µ –∫–ª–∏–∫–∏

‚úÖ –°–¥–µ–ª–∞–µ–º —Ç–∞–∫:

### üîπ –ù–∞—á–∏—Å–ª–µ–Ω–∏—è (charges)

* –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç **–ú–ï–°–Ø–¶ + –ì–û–î**
* —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç:

    * `period = YYYY-MM-01`

### üîπ –ü–ª–∞—Ç–µ–∂–∏ (payments)

* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

    * **–¥–∞—Ç–∞ = —Å–µ–≥–æ–¥–Ω—è**
* –ø–µ—Ä–∏–æ–¥ **–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∏–∑ –¥–∞—Ç—ã
* (–ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ ‚Äî –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)

---

# üß© –ß–ê–°–¢–¨ 1. –£–ª—É—á—à–∞–µ–º –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø

### üìå –ß—Ç–æ –º–µ–Ω—è–µ–º

* –≤–º–µ—Å—Ç–æ `<input type="date">`
* –∏—Å–ø–æ–ª—å–∑—É–µ–º:

    * `<select>` –º–µ—Å—è—Ü
    * `<select>` –≥–æ–¥

---

## ‚úÖ 1. –§–æ—Ä–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π (`charges/_form.blade.php`)

### üîÅ –ë—ã–ª–æ (—É—Å–ª–æ–≤–Ω–æ)

```blade
<input type="date" name="period" class="form-control">
```

### ‚úÖ –°—Ç–∞–ª–æ

```blade
<div class="row">
    <div class="col-md-6">
        <label class="form-label">–ú–µ—Å—è—Ü</label>
        <select name="month" class="form-select" required>
            @foreach(range(1,12) as $m)
                <option value="{{ $m }}"
                    {{ old('month', optional($charge->period)->month) == $m ? 'selected' : '' }}>
                    {{ \Carbon\Carbon::create()->month($m)->translatedFormat('F') }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-6">
        <label class="form-label">–ì–æ–¥</label>
        <select name="year" class="form-select" required>
            @foreach(range(now()->year, now()->year - 5) as $y)
                <option value="{{ $y }}"
                    {{ old('year', optional($charge->period)->year) == $y ? 'selected' : '' }}>
                    {{ $y }}
                </option>
            @endforeach
        </select>
    </div>
</div>
```

---

## ‚úÖ 2. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

### –í `store()` –∏ `update()`:

```php
$data = $request->validate([
    'apartment_id' => 'required',
    'service_id'   => 'required',
    'amount'       => 'required|numeric|min:0',
    'month'        => 'required|integer|min:1|max:12',
    'year'         => 'required|integer',
]);

$data['period'] = \Carbon\Carbon::create(
    $data['year'],
    $data['month'],
    1
);

// —É–±—Ä–∞—Ç—å month/year
unset($data['month'], $data['year']);

Charge::create($data);
```

‚úî —Ç–µ–ø–µ—Ä—å **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –æ—à–∏–±–∏—Ç—å—Å—è —Å –ø–µ—Ä–∏–æ–¥–æ–º**

---

# üß© –ß–ê–°–¢–¨ 2. –£–ª—É—á—à–∞–µ–º –ü–õ–ê–¢–ï–ñ–ò

### üìå –ò–¥–µ—è

* –ø–æ–ª–µ **–î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞**
* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **—Å–µ–≥–æ–¥–Ω—è**
* –Ω–∏–∫–∞–∫–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä—É—á–Ω—É—é

---

## ‚úÖ 1. –§–æ—Ä–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π

```blade
<input type="date"
       name="payment_date"
       class="form-control"
       value="{{ old('payment_date', $payment->payment_date?->format('Y-m-d') ?? now()->format('Y-m-d')) }}"
       required>
```

---

## ‚úÖ 2. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–ª–∞—Ç–µ–∂–µ–π

–ù–∏—á–µ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ
üëâ –ø–µ—Ä–∏–æ–¥ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä—ë—Ç—Å—è –∏–∑ `payment_date`**

---

# üß† –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–æ—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

### üîπ –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ –≤ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è—Ö

```blade
<option value="{{ $m }}"
 {{ old('month', optional($charge->period)->month ?? now()->month) == $m ? 'selected' : '' }}>
```

### üîπ –ë–ª–æ–∫–∏—Ä—É–µ–º –±—É–¥—É—â–∏–µ –º–µ—Å—è—Ü—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```blade
@if($y == now()->year && $m > now()->month)
    disabled
@endif
```

---

# üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç UX

‚úî –º–µ–Ω—å—à–µ –ø–æ–ª–µ–π
‚úî –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—à–∏–±–∏—Ç—å—Å—è
‚úî –±—ã—Å—Ç—Ä–µ–µ –≤–≤–æ–¥
‚úî –ø—Ä–∏–≤—ã—á–Ω–æ –¥–ª—è –ñ–ö–•
‚úî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üîú –°–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π –∞–ø–≥—Ä–µ–π–¥

1Ô∏è‚É£ **–ö–Ω–æ–ø–∫–∞ ‚Äú–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è —Å –ø—Ä–æ—à–ª–æ–≥–æ –º–µ—Å—è—Ü–∞‚Äù**
2Ô∏è‚É£ **–ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π**
3Ô∏è‚É£ **–ê–≤—Ç–æ–Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º**
4Ô∏è‚É£ **–ê–≤—Ç–æ–∑–∞—á—ë—Ç –ø–ª–∞—Ç–µ–∂–µ–π**

–•–æ—á–µ—à—å ‚Äî —Å–¥–µ–ª–∞–µ–º –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö.
–°–∫–∞–∂–∏ –Ω–æ–º–µ—Ä üöÄ

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](34.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](36.md)


