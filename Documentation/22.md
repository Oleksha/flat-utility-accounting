## –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/–¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è

–°–¥–µ–ª–∞–π —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/–¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (charges)

–û—Ç–ª–∏—á–Ω–æ! –ù–∏–∂–µ ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞—è, –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ **—Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π (Charges)** —Å Bootstrap, Blade –∏ Laravel best practices.

–Ø —Å–¥–µ–ª–∞—é:

* –º–∞—Ä—à—Ä—É—Ç
* –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
* —Ñ–æ—Ä–º–∞ (–µ–¥–∏–Ω–∞—è –¥–ª—è create/edit)
* view create
* view edit

---

# ‚úÖ **1. –ú–∞—Ä—à—Ä—É—Ç—ã ‚Äî routes/web.php**

```php
Route::resource('charges', ChargeController::class);
```

–ï—Å–ª–∏ `charges` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è *–≤–Ω—É—Ç—Ä–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã*, –ø–æ–∑–∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã, –Ω–æ –ø–æ–∫–∞ –æ—Å—Ç–∞–≤–∏–º –±–∞–∑–æ–≤—ã–π CRUD.

---

# ‚úÖ **2. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Äî ChargeController.php**

```php
php artisan make:controller ChargeController --resource
```

–ò –≤—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞–±–æ—á–∏–π –∫–æ–¥:

```php
<?php

namespace App\Http\Controllers;

use App\Models\Charge;
use App\Models\Apartment;
use App\Models\Service;
use Illuminate\Http\Request;

class ChargeController extends Controller
{
    public function create()
    {
        return view('charges.create', [
            'apartments' => Apartment::all(),
            'services'   => Service::all(),
            'charge'     => new Charge(),
        ]);
    }

    public function store(Request $request)
    {
        $request->validate([
            'apartment_id' => 'required|exists:apartments,id',
            'service_id'   => 'required|exists:services,id',
            'period'       => 'required|date',
            'amount'       => 'required|numeric|min:0',
            'comment'      => 'nullable|string|max:255',
        ]);

        Charge::create($request->all());

        return redirect()->route('apartments.show', $request->apartment_id)
            ->with('success', '–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ.');
    }

    public function edit(Charge $charge)
    {
        return view('charges.edit', [
            'charge'     => $charge,
            'apartments' => Apartment::all(),
            'services'   => Service::all(),
        ]);
    }

    public function update(Request $request, Charge $charge)
    {
        $request->validate([
            'apartment_id' => 'required|exists:apartments,id',
            'service_id'   => 'required|exists:services,id',
            'period'       => 'required|date',
            'amount'       => 'required|numeric|min:0',
            'comment'      => 'nullable|string|max:255',
        ]);

        $charge->update($request->all());

        return redirect()->route('apartments.show', $charge->apartment_id)
            ->with('success', '–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ.');
    }
}
```

---

# ‚úÖ **3. View-—à–∞–±–ª–æ–Ω —Ñ–æ—Ä–º—ã (–æ–±—â–∏–π)**

–°–æ–∑–¥–∞—ë–º Blade —Ñ–∞–π–ª:

`resources/views/charges/_form.blade.php`

```blade
<div class="row">
    <div class="col-md-8 offset-md-2">

        {{-- –ö–≤–∞—Ä—Ç–∏—Ä–∞ --}}
        <div class="mb-3">
            <label class="form-label">–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
            <select name="apartment_id" class="form-select" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                @foreach($apartments as $apartment)
                    <option value="{{ $apartment->id }}"
                        {{ old('apartment_id', $charge->apartment_id) == $apartment->id ? 'selected' : '' }}>
                        {{ $apartment->name }} ‚Äî {{ $apartment->address }}
                    </option>
                @endforeach
            </select>
        </div>

        {{-- –£—Å–ª—É–≥–∞ --}}
        <div class="mb-3">
            <label class="form-label">–£—Å–ª—É–≥–∞</label>
            <select name="service_id" class="form-select" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                @foreach($services as $service)
                    <option value="{{ $service->id }}"
                        {{ old('service_id', $charge->service_id) == $service->id ? 'selected' : '' }}>
                        {{ $service->name }}
                    </option>
                @endforeach
            </select>
        </div>

        {{-- –ü–µ—Ä–∏–æ–¥ --}}
        <div class="mb-3">
            <label class="form-label">–ü–µ—Ä–∏–æ–¥</label>
            <input type="month"
                name="period"
                value="{{ old('period', optional($charge->period)->format('Y-m')) }}"
                class="form-control"
                required>
        </div>

        {{-- –°—É–º–º–∞ --}}
        <div class="mb-3">
            <label class="form-label">–°—É–º–º–∞ (‚ÇΩ)</label>
            <input type="number"
                name="amount"
                class="form-control"
                step="0.01"
                min="0"
                value="{{ old('amount', $charge->amount) }}"
                required>
        </div>

        {{-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π --}}
        <div class="mb-3">
            <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
            <textarea name="comment" class="form-control" rows="2">{{ old('comment', $charge->comment) }}</textarea>
        </div>

        {{-- –ö–Ω–æ–ø–∫–∞ --}}
        <div class="text-end">
            <button class="btn btn-primary">
                {{ $charge->exists ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è' : '–î–æ–±–∞–≤–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ' }}
            </button>
        </div>

    </div>
</div>
```

---

# ‚úÖ **4. View: —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è**

`resources/views/charges/create.blade.php`

```blade
@extends('layouts.app')

@section('content')
<div class="container">
    <h2 class="mb-4">–î–æ–±–∞–≤–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ</h2>

    <form method="POST" action="{{ route('charges.store') }}">
        @csrf
        @include('charges._form')
    </form>
</div>
@endsection
```

---

# ‚úÖ **5. View: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è**

`resources/views/charges/edit.blade.php`

```blade
@extends('layouts.app')

@section('content')
<div class="container">
    <h2 class="mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ</h2>

    <form method="POST" action="{{ route('charges.update', $charge) }}">
        @csrf
        @method('PUT')
        @include('charges._form')
    </form>
</div>
@endsection
```

---

# üéâ **–ì–æ—Ç–æ–≤–æ!**

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ:

* —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
* —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
* –≤—ã–±–æ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã
* –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏
* –ø–µ—Ä–∏–æ–¥ —á–µ—Ä–µ–∑ HTML `<input type="month">`
* —á–∏—Å—Ç—ã–π Bootstrap
* –µ–¥–∏–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Blade-—Ñ—Ä–∞–≥–º–µ–Ω—Ç

–•–æ—á–µ—à—å ‚Äî —è —Å–¥–µ–ª–∞—é –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é —Ñ–æ—Ä–º—É –¥–ª—è **–ø–ª–∞—Ç–µ–∂–µ–π (payments)**? –ò–ª–∏ —É–¥–æ–±–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ ¬´–î–æ–±–∞–≤–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ¬ª –ø—Ä—è–º–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã?

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](21.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](23.md)


