## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (—á–∞—Å—Ç—å 3)

`[HTTP/1.1 500 Internal Server Error 1806ms]`

–û—Ç–ª–∏—á–Ω–æ, —ç—Ç–æ —É–∂–µ **–∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞** üëç
`500 Internal Server Error` = **–æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**, JS —Ç—É—Ç –Ω–∏ –ø—Ä–∏ —á—ë–º. –°–µ–π—á–∞—Å –º—ã –µ—ë **—Ç–æ—á–Ω–æ –Ω–∞–π–¥—ë–º –∏ –∏—Å–ø—Ä–∞–≤–∏–º**.

---

# üöë –®–ê–ì 1. –°–ú–û–¢–†–ò–ú –†–ï–ê–õ–¨–ù–£–Æ –û–®–ò–ë–ö–£ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

## –í–∞—Ä–∏–∞–Ω—Ç A ‚Äî `storage/logs/laravel.log`

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª:

```
storage/logs/laravel.log
```

–ü—Ä–æ–∫—Ä—É—Ç–∏ **–≤ —Å–∞–º—ã–π –Ω–∏–∑** ‚Äî —Ç–∞–º –±—É–¥–µ—Ç **–Ω–∞—Å—Ç–æ—è—â–∞—è –æ—à–∏–±–∫–∞**, –Ω–∞–ø—Ä–∏–º–µ—Ä:

* `Class "App\Http\Controllers\Charge" not found`
* `Call to a member function whereYear() on null`
* `Undefined column: period`
* `SQLSTATE...`

üëâ **–°–∫–æ–ø–∏—Ä—É–π 5‚Äì10 —Å—Ç—Ä–æ–∫ –æ—à–∏–±–∫–∏** ‚Äî —ç—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å.

---

## –í–∞—Ä–∏–∞–Ω—Ç B ‚Äî –≤–∫–ª—é—á–∏—Ç—å debug (–µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ)

–í `.env`:

```env
APP_DEBUG=true
```

–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –æ—Ç–∫—Ä–æ–π:

```
/charges/by-period?apartment_id=1&year=2025&month=1
```

–¢—ã —É–≤–∏–¥–∏—à—å **–∫—Ä–∞—Å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Laravel —Å —Ç–æ—á–Ω–æ–π –æ—à–∏–±–∫–æ–π**.

---

# üß† 90% –í–ï–†–û–Ø–¢–ù–´–ï –ü–†–ò–ß–ò–ù–´ (–ø–æ –æ–ø—ã—Ç—É)

–ü—Ä–æ–≤–µ—Ä—å —Å—Ä–∞–∑—É —ç—Ç–∏ –ø—É–Ω–∫—Ç—ã ‚Äî **–æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏–º–µ–Ω–Ω–æ –æ–Ω–∏**.

---

## ‚ùå 1Ô∏è‚É£ –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å `Charge`

### –°–∏–º–ø—Ç–æ–º:

`Class "Charge" not found`

### ‚úî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–í `ChargeController` –≤–≤–µ—Ä—Ö—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```php
use App\Models\Charge;
```

---

## ‚ùå 2Ô∏è‚É£ –ü–æ–ª–µ `period` ‚Äî STRING, –∞ –Ω–µ DATE

### –°–∏–º–ø—Ç–æ–º:

`whereYear()` / `whereMonth()` –ø–∞–¥–∞—é—Ç

### ‚úî –ü—Ä–æ–≤–µ—Ä—å –º–æ–¥–µ–ª—å `Charge.php`

```php
protected $casts = [
    'period' => 'date',
];
```

–ò –≤ –ë–î:

* `period` = `DATE` –∏–ª–∏ `DATETIME`

---

## ‚ùå 3Ô∏è‚É£ –ù–µ—Ç —Å–≤—è–∑–∏ `service()`

### –°–∏–º–ø—Ç–æ–º:

`Trying to get property 'name' of non-object`

### ‚úî –í `Charge.php`

```php
public function service()
{
    return $this->belongsTo(Service::class);
}
```

---

## ‚ùå 4Ô∏è‚É£ Middleware `auth` –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å

### –°–∏–º–ø—Ç–æ–º:

500 –∏–ª–∏ 403 –ø—Ä–∏ fetch

### ‚úî –ë—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

–í `routes/web.php` **–≤—Ä–µ–º–µ–Ω–Ω–æ**:

```php
Route::get('/charges/by-period', [ChargeController::class, 'byPeriod']);
```

(–±–µ–∑ `->middleware('auth')`)

–ï—Å–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ ‚Äî –∑–Ω–∞—á–∏—Ç fetch —Ö–æ–¥–∏—Ç –±–µ–∑ —Å–µ—Å—Å–∏–∏.

---

## ‚ùå 5Ô∏è‚É£ –û—à–∏–±–∫–∞ –≤ —Å–∞–º–æ–º –∑–∞–ø—Ä–æ—Å–µ

### ‚úî –ó–∞–º–µ–Ω–∏–º –º–µ—Ç–æ–¥ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π (–¥–ª—è —Ç–µ—Å—Ç–∞)

```php
public function byPeriod(Request $request)
{
    return response()->json([
        'apartment_id' => $request->apartment_id,
        'year' => $request->year,
        'month' => $request->month,
    ]);
}
```

üëâ –ï—Å–ª–∏ **500 –∏—Å—á–µ–∑**, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ **–≤ –∑–∞–ø—Ä–æ—Å–µ –∫ –ë–î**.

---

# üîç –®–ê–ì 2. –ü–†–û–í–ï–†–ö–ê –í –ë–†–ê–£–ó–ï–†–ï

–û—Ç–∫—Ä–æ–π –≤—Ä—É—á–Ω—É—é (–û–ß–ï–ù–¨ –í–ê–ñ–ù–û):

```
/charges/by-period?apartment_id=1&year=2025&month=1
```

### ‚úî –ù–æ—Ä–º–∞:

```json
[]
```

–∏–ª–∏ –º–∞—Å—Å–∏–≤ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

### ‚ùå –ï—Å–ª–∏ 500 ‚Äî –æ—à–∏–±–∫–∞ **—Ç–æ—á–Ω–æ backend**

---

# üéØ –ß–¢–û –ú–ù–ï –ù–£–ñ–ù–û –û–¢ –¢–ï–ë–Ø –°–ï–ô–ß–ê–°

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å **–∑–∞ 1 —Å–æ–æ–±—â–µ–Ω–∏–µ**, –ø—Ä–∏—à–ª–∏:

1Ô∏è‚É£ **–¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ `laravel.log` (–Ω–∏–∑ —Ñ–∞–π–ª–∞)**
–∏–ª–∏
2Ô∏è‚É£ **–°–∫—Ä–∏–Ω / —Ç–µ–∫—Å—Ç –∫—Ä–∞—Å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã Laravel**

–Ø —Å—Ä–∞–∑—É —Å–∫–∞–∂—É:

* ‚ùå —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–ª–æ–º–∞–Ω–æ
* ‚úÖ –∫–∞–∫—É—é —Å—Ç—Ä–æ–∫—É –∏—Å–ø—Ä–∞–≤–∏—Ç—å
* üîß –¥–∞–º —Ç–æ—á–Ω—ã–π –ø–∞—Ç—á

–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π ‚Äî —ç—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è Laravel-–æ—à–∏–±–∫–∞, —Å–µ–π—á–∞—Å –±—ã—Å—Ç—Ä–æ –¥–æ–±—å—ë–º üí™

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](47.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](49.md)


