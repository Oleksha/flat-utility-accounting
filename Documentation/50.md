## –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–≤–∏—Ç–∞–Ω—Ü–∏–π –≤ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è—Ö

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ. –ù—É–∂–Ω–æ —á—Ç–æ–±—ã –≤ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —ç—Ç—É –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –≤ –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–µ

–û—Ç–ª–∏—á–Ω–æ üëç –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Ç–µ–ø–µ—Ä—å –¥–∞–≤–∞–π **—Å–≤—è–∂–µ–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è —Å –∫–≤–∏—Ç–∞–Ω—Ü–∏—è–º–∏** —Ç–∞–∫, —á—Ç–æ–±—ã –∏—Ö **–º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä—è–º–æ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π**.

–Ø –ø–æ–∫–∞–∂—É —Ä–∞–±–æ—á–∏–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.

---

# üéØ –¶–µ–ª—å

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **–ù–∞—á–∏—Å–ª–µ–Ω–∏—è (Charges)** –∫–∞–∂–¥–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã:

* —Ä—è–¥–æ–º —Å –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–æ–π –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **PDF-–∫–≤–∏—Ç–∞–Ω—Ü–∏–∏**, –∫ –∫–æ—Ç–æ—Ä—ã–º –æ–Ω–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞
* –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Ö –≤—Å–µ
* –∫–ª–∏–∫ –ø–æ –∏–∫–æ–Ω–∫–µ ‚Üí —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ / –ø—Ä–æ—Å–º–æ—Ç—Ä

---

# üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

1Ô∏è‚É£ –ú–æ–¥–µ–ª—å `Charge` —É–∂–µ –∏–º–µ–µ—Ç:

```php
public function receipts()
{
    return $this->belongsToMany(Receipt::class);
}
```

2Ô∏è‚É£ –ú–æ–¥–µ–ª—å `Receipt`:

```php
public function charges()
{
    return $this->belongsToMany(Charge::class);
}
```

3Ô∏è‚É£ –¢–∞–±–ª–∏—Ü–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π (`charges`) ‚Üí **–≤—ã–≤–æ–¥–∏–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–≤–∏—Ç–∞–Ω—Ü–∏–π**

---

# üõ† –ü—Ä–∏–º–µ—Ä Blade-—à–∞–±–ª–æ–Ω–∞

`apartments/partials/charges-table.blade.php` (–∏–ª–∏ –ø—Ä—è–º–æ –≤ show)

```blade
<table class="table table-bordered">
    <thead>
        <tr>
            <th>–£—Å–ª—É–≥–∞</th>
            <th>–°—É–º–º–∞</th>
            <th>–ü–µ—Ä–∏–æ–¥</th>
            <th>–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏</th>
        </tr>
    </thead>
    <tbody>
        @foreach($charges as $charge)
            <tr>
                <td>{{ $charge->service->name }}</td>
                <td>{{ number_format($charge->amount, 2, ',', ' ') }} ‚ÇΩ</td>
                <td>{{ $charge->period->translatedFormat('F Y') }}</td>
                <td>
                    @if($charge->receipts->isEmpty())
                        <span class="text-muted">–ù–µ—Ç</span>
                    @else
                        @foreach($charge->receipts as $receipt)
                            <a href="{{ route('receipts.download', $receipt) }}"
                               class="btn btn-sm btn-outline-primary mb-1"
                               target="_blank">
                                üìÑ {{ $receipt->period->format('m.Y') }}
                            </a>
                        @endforeach
                    @endif
                </td>
            </tr>
        @endforeach
    </tbody>
</table>
```

---

# üîπ –ü–æ—è—Å–Ω–µ–Ω–∏—è

1Ô∏è‚É£ `@foreach($charge->receipts as $receipt)`

* –≤—ã–≤–æ–¥–∏–º **–≤—Å–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏**, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—é

2Ô∏è‚É£ `<a href="{{ route('receipts.download', $receipt) }}" target="_blank">`

* –∫–ª–∏–∫–∞–µ–º ‚Üí —Å–∫–∞—á–∏–≤–∞–µ–º / –æ—Ç–∫—Ä—ã–≤–∞–µ–º PDF

3Ô∏è‚É£ `üìÑ {{ $receipt->period->format('m.Y') }}`

* –Ω–∞ –∫–Ω–æ–ø–∫–µ –≤–∏–¥–Ω–æ **–∫–∞–∫–æ–π –º–µ—Å—è—Ü –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏**

---

# üîπ –£–ª—É—á—à–µ–Ω–∏—è UX

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–∏–∫–æ–Ω–∫–∏ PDF** –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
* Tooltip —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ (`title="{{ $receipt->original_name }}"`)
* –ï—Å–ª–∏ –º–Ω–æ–≥–æ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–∞–∫—Å–∏–º—É–º 2 –∏ —Å—Å—ã–ª–∫—É ¬´–µ—â—ë N¬ª

```blade
<a href="{{ route('receipts.download', $receipt) }}" class="btn btn-sm btn-outline-primary" title="{{ $receipt->original_name }}" target="_blank">
    üìÑ {{ $receipt->period->format('m.Y') }}
</a>
```

---

# üîπ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π:

| –£—Å–ª—É–≥–∞   | –°—É–º–º–∞   | –ü–µ—Ä–∏–æ–¥      | –ö–≤–∏—Ç–∞–Ω—Ü–∏–∏  |
| -------- | ------- | ----------- | ---------- |
| –í–æ–¥–∞     | 1 500 ‚ÇΩ | –Ø–Ω–≤–∞—Ä—å 2025 | üìÑ 01.2025 |
| –°–≤–µ—Ç     | 800 ‚ÇΩ   | –Ø–Ω–≤–∞—Ä—å 2025 | üìÑ 01.2025 |
| –ò–Ω—Ç–µ—Ä–Ω–µ—Ç | 500 ‚ÇΩ   | –Ø–Ω–≤–∞—Ä—å 2025 | –ù–µ—Ç        |

* –ö–ª–∏–∫ ‚Üí –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏
* –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π ‚Üí –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–Ω–æ–ø–æ–∫

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞—Ç—å **–µ—â—ë –ª—É—á—à–µ**:

* –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å **–≤–∫–ª–∞–¥–∫—É ‚Äú–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏‚Äù –ø—Ä—è–º–æ –≤ Modal –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è**
* —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é **—É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å PDF** –ø—Ä—è–º–æ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π

–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —Ç–∞–∫ —Å–¥–µ–ª–∞–ª?

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](49.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](51.md)


