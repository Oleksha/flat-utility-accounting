## Делаем красивый дашбоард

Давай сделаем красивый дашбоард с карточками квартир по адресу '/'

Отлично! Давай сделаем **красивый дашборд на главной странице `/`**, где каждая квартира будет представлена **карточкой с балансом, суммой начислений и платежей**, и кнопкой для перехода к деталям. Используем **Blade + Bootstrap** для современного интерфейса.

---

# **1. Контроллер**

Создадим метод для главной страницы. Если у тебя нет отдельного `DashboardController`, можно использовать `ApartmentController@index`:

```php
public function index()
{
    // Загружаем все квартиры с начислениями и платежами
    $apartments = Apartment::with(['charges', 'payments'])->get();

    return view('dashboard', compact('apartments'));
}
```

> Убедись, что маршруты `/` ведут на этот метод:

```php
Route::get('/', [ApartmentController::class, 'index'])->name('dashboard');
```

---

# **2. Шаблон Blade: `resources/views/dashboard.blade.php`**

```blade
@extends('layouts.app')

@section('content')
<h1 class="mb-4">Дашборд квартир</h1>

<div class="row row-cols-1 row-cols-md-3 g-4">
    @foreach($apartments as $apartment)
        @php
            $totalCharges = $apartment->charges->sum('amount');
            $totalPayments = $apartment->payments->sum('amount');
            $balance = $totalCharges - $totalPayments;

            // Цветовая индикация баланса
            $balanceClass = $balance < 0 ? 'bg-danger' : 'bg-success';
        @endphp

        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">{{ $apartment->name }}</h5>
                    <p class="card-text"><strong>Адрес:</strong> {{ $apartment->address }}</p>

                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Начисления</span>
                            <span>{{ $totalCharges }} ₽</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Платежи</span>
                            <span>{{ $totalPayments }} ₽</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between {{ $balanceClass }} text-white">
                            <span>Баланс</span>
                            <span>{{ $balance }} ₽</span>
                        </li>
                    </ul>

                    <a href="{{ route('apartments.show', $apartment) }}" class="btn btn-primary w-100">Перейти к квартире</a>
                </div>
            </div>
        </div>
    @endforeach
</div>
@endsection
```

---

# **3. Что мы получаем**

* **Карточки для каждой квартиры** в сетке (`row-cols-md-3` — три карточки в ряду на ПК).
* **Баланс подсвечивается**:

    * Зеленый (`bg-success`) — положительный
    * Красный (`bg-danger`) — долг
* Показаны **суммарные начисления и платежи**.
* Кнопка "Перейти к квартире" ведет к детальной странице с начислениями и платежами.
* Современный, чистый дизайн с Bootstrap и тенью карточек (`shadow-sm`).

---

Если хочешь, я могу добавить **диаграммы (Chart.js) на каждой карточке**, показывающие динамику начислений и платежей по месяцам прямо на дашборде. Это сделает интерфейс ещё нагляднее.

Хочешь, чтобы я это сделал?

---

[Предыдущая часть](16.md) | [Содержание](01.md) | [Следующая часть](18.md)


