## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (—á–∞—Å—Ç—å 2)

–û—à–∏–±–∫–∞ –∏—Å—á–µ–∑–ª–∞, –Ω–æ –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è

–û—Ç–ª–∏—á–Ω–æ, —á—Ç–æ –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–ª–∞! –¢–µ–ø–µ—Ä—å –ø—Ä–æ **–Ω–µ–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤**. –û–±—ã—á–Ω–æ –≤ Laravel + Blade + Chart.js —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏:

---

## **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ `@stack('scripts')`**

–í `layouts/app.blade.php` –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º `</body>` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```blade
@stack('scripts')
</body>
```

–ï—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ—Ç, JS-–∫–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø—Ä–æ—Å—Ç–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.

---

## **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID `canvas`**

–í Blade-—à–∞–±–ª–æ–Ω–µ –∫–∞–∂–¥—ã–π –≥—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π id**:

```blade
<canvas id="chart-{{ $apartment->id }}" height="100"></canvas>
```

–ò –≤ JS:

```js
const ctx{{ $apartment->id }} = document.getElementById('chart-{{ $apartment->id }}').getContext('2d');
```

–ï—Å–ª–∏ ID –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.

---

## **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

–í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —É–±–µ–¥–∏—Å—å, —á—Ç–æ `chartLabels`, `chartCharges` –∏ `chartPayments` ‚Äî **–º–∞—Å—Å–∏–≤—ã** –∏–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:

```php
$apartment->chartLabels = $months->map(fn($m) => \Carbon\Carbon::createFromFormat('Y-m', $m)->format('M Y'))->toArray();
$apartment->chartCharges = $months->map(fn($m) => $chargesGrouped[$m] ?? 0)->toArray();
$apartment->chartPayments = $months->map(fn($m) => $paymentsGrouped[$m] ?? 0)->toArray();
```

> –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –±–µ–∑ `->toArray()`, –∏–Ω–æ–≥–¥–∞ Blade –∏–ª–∏ Chart.js –Ω–µ –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å JSON.

---

## **4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Chart.js**

–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω **–ø–æ—Å–ª–µ –≤—Å–µ—Ö `<canvas>`** –∏ –ø–µ—Ä–µ–¥ `@stack('scripts')`:

```html
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
@stack('scripts')
```

---

## **5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞**

* –û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Console.
* –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞ `Cannot read property 'getContext' of null` ‚Äî –∑–Ω–∞—á–∏—Ç `<canvas>` –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω –∏–ª–∏ id –Ω–µ–≤–µ—Ä–Ω—ã–π.
* –ï—Å–ª–∏ `Unexpected token` –ø—Ä–∏ JSON ‚Äî –∑–Ω–∞—á–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ JS.

---

üí° **–ß–∞—â–µ –≤—Å–µ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è –∏–∑-–∑–∞ 2 –≤–µ—â–µ–π:**

1. –ù–µ—Ç `@stack('scripts')` –≤ layout.
2. –î–∞–Ω–Ω—ã–µ –¥–ª—è `labels` –∏–ª–∏ `datasets` –Ω–µ –º–∞—Å—Å–∏–≤—ã (`toArray()` –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ).

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø—Ä–∏—Å–ª–∞—Ç—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π —à–∞–±–ª–æ–Ω –¥–∞—à–±–æ—Ä–¥–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ id –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏**, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–∑—É –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.

–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª?

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](19.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](21.md)


