## –í—ã–∑–æ–≤ —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å üëç
–≠—Ç–æ –∫–∞–∫ —Ä–∞–∑ **–ø—Ä–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π UX**, –∏ —Ç—É—Ç –µ—Å—Ç—å **–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç**.

---

## üéØ –ö—É–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π

### ‚úÖ **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã ‚Üí –≤–∫–ª–∞–¥–∫–∞ ¬´–ù–∞—á–∏—Å–ª–µ–Ω–∏—è¬ª**

üìç `apartments.show` ‚Üí tab **¬´–ù–∞—á–∏—Å–ª–µ–Ω–∏—è¬ª**

–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç—É–¥–∞:

* –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ **–æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º**
* –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ:

    * –≤—ã–±—Ä–∞–ª –∫–≤–∞—Ä—Ç–∏—Ä—É
    * —Å–º–æ—Ç—Ä–∏—Ç –Ω—É–∂–Ω—ã–π –≥–æ–¥
* –ª–æ–≥–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å **–≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ**
* –Ω–µ –Ω—É–∂–Ω–æ –ø–ª–æ–¥–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

üëâ **–í—Å–µ –ñ–ö–•-—Å–∏—Å—Ç–µ–º—ã –¥–µ–ª–∞—é—Ç –∏–º–µ–Ω–Ω–æ —Ç–∞–∫.**

---

# üß≠ –ö–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å (UX)

–í–æ –≤–∫–ª–∞–¥–∫–µ **¬´–ù–∞—á–∏—Å–ª–µ–Ω–∏—è¬ª**, —Å–≤–µ—Ä—Ö—É:

```
[ üìã –ù–∞—á–∏—Å–ª–µ–Ω–∏—è –∑–∞ –º–µ—Å—è—Ü ]   [ üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏—é ]
```

–ù–∏–∂–µ ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π.

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ **¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏—é¬ª**:

* –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **Bootstrap modal**
* –≤–Ω—É—Ç—Ä–∏:

    * –º–µ—Å—è—Ü / –≥–æ–¥
    * –∑–∞–≥—Ä—É–∑–∫–∞ PDF
    * —á–µ–∫–±–æ–∫—Å—ã —É—Å–ª—É–≥

---

# üõ† –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ø–æ —à–∞–≥–∞–º)

---

## ‚úÖ –®–ê–ì 1. –ö–Ω–æ–ø–∫–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ ¬´–ù–∞—á–∏—Å–ª–µ–Ω–∏—è¬ª

`apartments/show.blade.php`

```blade
<div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">–ù–∞—á–∏—Å–ª–µ–Ω–∏—è</h4>

    <div class="btn-group">
        <a href="{{ route('charges.bulk.create', [
            'apartment_id' => $apartment->id,
            'year' => $year
        ]) }}"
           class="btn btn-primary">
            üìã –ù–∞—á–∏—Å–ª–µ–Ω–∏—è –∑–∞ –º–µ—Å—è—Ü
        </a>

        <button class="btn btn-outline-secondary"
                data-bs-toggle="modal"
                data-bs-target="#uploadReceiptModal">
            üìé –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–≤–∏—Ç–∞–Ω—Ü–∏—é
        </button>
    </div>
</div>
```

---

## ‚úÖ –®–ê–ì 2. Modal —Å —Ñ–æ—Ä–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

–í –∫–æ–Ω—Ü–µ `apartments/show.blade.php`:

```blade
<div class="modal fade" id="uploadReceiptModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <form method="POST"
            action="{{ route('receipts.store') }}"
            enctype="multipart/form-data">
        @csrf

        <div class="modal-header">
          <h5 class="modal-title">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">

            <input type="hidden" name="apartment_id" value="{{ $apartment->id }}">

            {{-- –ü–µ—Ä–∏–æ–¥ --}}
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">–ú–µ—Å—è—Ü</label>
                    <select name="month" class="form-select" required>
                        @foreach(range(1,12) as $m)
                            <option value="{{ $m }}">{{ \Carbon\Carbon::create()->month($m)->translatedFormat('F') }}</option>
                        @endforeach
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">–ì–æ–¥</label>
                    <select name="year" class="form-select" required>
                        @foreach(range(now()->year, now()->year - 5) as $y)
                            <option value="{{ $y }}">{{ $y }}</option>
                        @endforeach
                    </select>
                </div>
            </div>

            {{-- PDF --}}
            <div class="mb-3">
                <label class="form-label">PDF-–∫–≤–∏—Ç–∞–Ω—Ü–∏—è</label>
                <input type="file"
                       name="file"
                       accept="application/pdf"
                       class="form-control"
                       required>
            </div>

            {{-- –ù–∞—á–∏—Å–ª–µ–Ω–∏—è --}}
            <div class="mb-2 fw-bold">–ö –∫–∞–∫–∏–º —É—Å–ª—É–≥–∞–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è:</div>

            @foreach($chargesForYear as $charge)
                <div class="form-check">
                    <input class="form-check-input"
                           type="checkbox"
                           name="charges[]"
                           value="{{ $charge->id }}">
                    <label class="form-check-label">
                        {{ $charge->service->name }}
                        ({{ $charge->period->translatedFormat('F Y') }})
                        ‚Äî {{ number_format($charge->amount, 2, ',', ' ') }} ‚ÇΩ
                    </label>
                </div>
            @endforeach

        </div>

        <div class="modal-footer">
          <button type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal">
              –û—Ç–º–µ–Ω–∞
          </button>
          <button class="btn btn-primary">
              –ó–∞–≥—Ä—É–∑–∏—Ç—å
          </button>
        </div>

      </form>

    </div>
  </div>
</div>
```

---

## ‚úÖ –®–ê–ì 3. –î–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã

–í `ApartmentController@show` –¥–æ–±–∞–≤—å:

```php
$chargesForYear = $apartment->charges()
    ->whereYear('period', $year)
    ->with('service')
    ->orderBy('period')
    ->get();
```

–ò –ø–µ—Ä–µ–¥–∞–π –≤ view.

---

# üéâ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å:

‚úî —Ñ–æ—Ä–º–∞ —Ç–∞–º, –≥–¥–µ –µ—ë –æ–∂–∏–¥–∞—é—Ç
‚úî –Ω–µ –ª–æ–º–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é
‚úî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã
‚úî –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
‚úî –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ

---

## üîú –û—á–µ–Ω—å –ª–æ–≥–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–∞–ª—å—à–µ

1Ô∏è‚É£ –ê–≤—Ç–æ—Ñ–∏–ª—å—Ç—Ä —á–µ–∫–±–æ–∫—Å–æ–≤ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –º–µ—Å—è—Ü—É
2Ô∏è‚É£ Drag & Drop + –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä PDF
3Ô∏è‚É£ –ü–æ–∫–∞–∑ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π –ø—Ä—è–º–æ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
4Ô∏è‚É£ OCR –∏ –∞–≤—Ç–æ–ø—Ä–∏–≤—è–∑–∫–∞ —É—Å–ª—É–≥

–•–æ—á–µ—à—å ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º.
–ú–æ–∂–µ–º —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞—Ç—å **–ø.1 (–∞–≤—Ç–æ—Ñ–∏–ª—å—Ç—Ä –ø–æ –º–µ—Å—è—Ü—É)** –∏–ª–∏ —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ üëå

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](42.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](44.md)


