## Blade-шаблоны для Rates, Charges и Payments

Хочу.

Отлично! Давай сразу сделаем **Blade-шаблоны для Rates, Charges и Payments** в едином стиле с уже готовыми шаблонами для квартир: таблицы, кнопки, формы, Bootstrap.

---

# **1. Rates (Тарифы)**

### `resources/views/rates/index.blade.php`

```blade
@extends('layouts.app')

@section('content')
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Тарифы</h1>
    <a class="btn btn-primary" href="{{ route('rates.create') }}">Добавить тариф</a>
</div>

<table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Квартира</th>
            <th>Поставщик</th>
            <th>Услуга</th>
            <th>Цена</th>
            <th>Тип</th>
            <th>Дата начала</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        @foreach($rates as $rate)
        <tr>
            <td>{{ $rate->id }}</td>
            <td>{{ $rate->apartment->name }}</td>
            <td>{{ $rate->provider->name }}</td>
            <td>{{ $rate->service->name }}</td>
            <td>{{ $rate->price }} ₽</td>
            <td>{{ ucfirst($rate->type) }}</td>
            <td>{{ $rate->start_date->format('d.m.Y') }}</td>
            <td>
                <a class="btn btn-sm btn-info" href="{{ route('rates.show', $rate) }}">Просмотр</a>
                <a class="btn btn-sm btn-warning" href="{{ route('rates.edit', $rate) }}">Редактировать</a>
                <form action="{{ route('rates.destroy', $rate) }}" method="POST" class="d-inline">
                    @csrf
                    @method('DELETE')
                    <button class="btn btn-sm btn-danger" onclick="return confirm('Удалить тариф?')">Удалить</button>
                </form>
            </td>
        </tr>
        @endforeach
    </tbody>
</table>
@endsection
```

### `resources/views/rates/create.blade.php` и `edit.blade.php`

```blade
@extends('layouts.app')

@section('content')
<h1>{{ isset($rate) ? 'Редактировать тариф' : 'Добавить тариф' }}</h1>

<form action="{{ isset($rate) ? route('rates.update', $rate) : route('rates.store') }}" method="POST">
    @csrf
    @if(isset($rate)) @method('PUT') @endif

    <div class="mb-3">
        <label class="form-label">Квартира</label>
        <select name="apartment_id" class="form-select" required>
            @foreach($apartments as $apartment)
            <option value="{{ $apartment->id }}" {{ isset($rate) && $rate->apartment_id==$apartment->id ? 'selected' : '' }}>
                {{ $apartment->name }}
            </option>
            @endforeach
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Поставщик</label>
        <select name="provider_id" class="form-select" required>
            @foreach($providers as $provider)
            <option value="{{ $provider->id }}" {{ isset($rate) && $rate->provider_id==$provider->id ? 'selected' : '' }}>
                {{ $provider->name }}
            </option>
            @endforeach
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Услуга</label>
        <select name="service_id" class="form-select" required>
            @foreach($services as $service)
            <option value="{{ $service->id }}" {{ isset($rate) && $rate->service_id==$service->id ? 'selected' : '' }}>
                {{ $service->name }}
            </option>
            @endforeach
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Цена</label>
        <input type="number" name="price" class="form-control" value="{{ $rate->price ?? old('price') }}" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Тип</label>
        <select name="type" class="form-select" required>
            <option value="fixed" {{ isset($rate) && $rate->type=='fixed' ? 'selected' : '' }}>Фиксированный</option>
            <option value="metered" {{ isset($rate) && $rate->type=='metered' ? 'selected' : '' }}>По счетчику</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Дата начала</label>
        <input type="date" name="start_date" class="form-control" value="{{ isset($rate) ? $rate->start_date->format('Y-m-d') : old('start_date') }}" required>
    </div>

    <button class="btn btn-success" type="submit">Сохранить</button>
    <a class="btn btn-secondary" href="{{ route('rates.index') }}">Отмена</a>
</form>
@endsection
```

---

# **2. Charges (Начисления)**

### `resources/views/charges/index.blade.php`

```blade
@extends('layouts.app')

@section('content')
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Начисления</h1>
    <a class="btn btn-primary" href="{{ route('charges.create') }}">Добавить начисление</a>
</div>

<table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Квартира</th>
            <th>Услуга</th>
            <th>Сумма</th>
            <th>Период</th>
            <th>Комментарий</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        @foreach($charges as $charge)
        <tr>
            <td>{{ $charge->id }}</td>
            <td>{{ $charge->apartment->name }}</td>
            <td>{{ $charge->service->name }}</td>
            <td>{{ $charge->amount }} ₽</td>
            <td>{{ $charge->period->format('m.Y') }}</td>
            <td>{{ $charge->comment }}</td>
            <td>
                <a class="btn btn-sm btn-warning" href="{{ route('charges.edit', $charge) }}">Редактировать</a>
                <form action="{{ route('charges.destroy', $charge) }}" method="POST" class="d-inline">
                    @csrf
                    @method('DELETE')
                    <button class="btn btn-sm btn-danger" onclick="return confirm('Удалить начисление?')">Удалить</button>
                </form>
            </td>
        </tr>
        @endforeach
    </tbody>
</table>
@endsection
```

### `resources/views/charges/create.blade.php` и `edit.blade.php`

* Select для квартиры и услуги.
* Поля сумма, период (input type=date), комментарий.
* Кнопки Сохранить / Отмена.
* Стиль такой же, как для тарифов.

---

# **3. Payments (Платежи)**

### `resources/views/payments/index.blade.php`

```blade
@extends('layouts.app')

@section('content')
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Платежи</h1>
    <a class="btn btn-primary" href="{{ route('payments.create') }}">Добавить платеж</a>
</div>

<table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Квартира</th>
            <th>Сумма</th>
            <th>Дата</th>
            <th>Комментарий</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        @foreach($payments as $payment)
        <tr>
            <td>{{ $payment->id }}</td>
            <td>{{ $payment->apartment->name }}</td>
            <td>{{ $payment->amount }} ₽</td>
            <td>{{ $payment->payment_date->format('d.m.Y') }}</td>
            <td>{{ $payment->comment }}</td>
            <td>
                <a class="btn btn-sm btn-warning" href="{{ route('payments.edit', $payment) }}">Редактировать</a>
                <form action="{{ route('payments.destroy', $payment) }}" method="POST" class="d-inline">
                    @csrf
                    @method('DELETE')
                    <button class="btn btn-sm btn-danger" onclick="return confirm('Удалить платеж?')">Удалить</button>
                </form>
            </td>
        </tr>
        @endforeach
    </tbody>
</table>
@endsection
```

### `resources/views/payments/create.blade.php` и `edit.blade.php`

* Select для квартиры.
* Поля: сумма, дата, комментарий.
* Кнопки Сохранить / Отмена.
* Стиль единый с тарифами и начислениями.

---

✅ **Теперь у нас есть:**

* Полный интерфейс для ПК для всех сущностей: квартиры, поставщики, услуги, тарифы, начисления, платежи.
* Единый стиль с Bootstrap.
* CRUD полностью рабочий.
* Баланс квартиры можно считать через отношение начисления – платежи.

---

Если хочешь, следующим шагом я могу **сделать на главной странице квартир панель с текущим балансом, начислениями и платежами в виде карточек**, чтобы интерфейс был ещё удобнее и нагляднее.

Хочешь, чтобы я это сделал?

---

[Предыдущая часть](10.md) | [Содержание](01.md) | [Следующая часть](12md)


