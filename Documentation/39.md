## –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞ –º–µ—Å—è—Ü

–û—Ç–ª–∏—á–Ω–æ üî•

**–ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞ –º–µ—Å—è—Ü** ‚Äî –æ—á–µ–Ω—å –ª–æ–≥–∏—á–Ω–æ–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ.
–°–¥–µ–ª–∞–µ–º **–ø—Ä–æ—Å—Ç–æ, –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–æ–ª–µ–π**, –∫–∞–∫ –≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–∫–∞—Ö.

---

## üéØ UX (–∫–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å)

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **¬´–ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –º–µ—Å—è—Ü¬ª**:

1. –≤—ã–±–∏—Ä–∞–µ—à—å:

    * –∫–≤–∞—Ä—Ç–∏—Ä—É
    * –º–µ—Å—è—Ü + –≥–æ–¥
2. —Ç–∞–±–ª–∏—Ü–∞ —É—Å–ª—É–≥:

    * –ø–æ –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–µ ‚Üí —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
3. –æ–¥–Ω–∞ –¥–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Å–µ–≥–æ–¥–Ω—è)
4. –∫–Ω–æ–ø–∫–∞:

   > üíæ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏**

üëâ –í –∏—Ç–æ–≥–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª–∞—Ç–µ–∂–µ–π –æ–¥–Ω–æ–π –¥–∞—Ç–æ–π**.

---

# üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

* 1 —Ñ–æ—Ä–º–∞
* 1 –¥–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞
* N –∑–∞–ø–∏—Å–µ–π `payments`
* —É—Å–ª—É–≥–∞ ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç–æ)

---

# ‚úÖ –®–ê–ì 1. –ú–∞—Ä—à—Ä—É—Ç—ã

`routes/web.php`

```php
Route::get('/payments/bulk/create', [PaymentController::class, 'bulkCreate'])
    ->name('payments.bulk.create');

Route::post('/payments/bulk/store', [PaymentController::class, 'bulkStore'])
    ->name('payments.bulk.store');
```

---

# ‚úÖ –®–ê–ì 2. –ú–µ—Ç–æ–¥—ã –≤ PaymentController

```php
use App\Models\Service;
use Carbon\Carbon;
```

### bulkCreate

```php
public function bulkCreate(Request $request)
{
    return view('payments.bulk-create', [
        'apartments'  => Apartment::all(),
        'services'    => Service::all(),
        'month'       => $request->get('month', now()->month),
        'year'        => $request->get('year', now()->year),
        'apartmentId' => $request->get('apartment_id'),
        'paymentDate' => now()->format('Y-m-d'),
    ]);
}
```

---

### bulkStore

```php
public function bulkStore(Request $request)
{
    $data = $request->validate([
        'apartment_id' => 'required|exists:apartments,id',
        'payment_date' => 'required|date',
        'payments'     => 'required|array',
        'payments.*.service' => 'nullable|exists:services,id',
        'payments.*.amount'  => 'nullable|numeric|min:0',
    ]);

    foreach ($data['payments'] as $payment) {

        if (empty($payment['amount']) || $payment['amount'] == 0) {
            continue;
        }

        Payment::create([
            'apartment_id' => $data['apartment_id'],
            'service_id'   => $payment['service'],
            'payment_date' => $data['payment_date'],
            'amount'       => $payment['amount'],
        ]);
    }

    return redirect()
        ->route('apartments.show', $data['apartment_id'])
        ->with('success', '–ü–ª–∞—Ç–µ–∂–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
}
```

---

# ‚úÖ –®–ê–ì 3. –®–∞–±–ª–æ–Ω —Ñ–æ—Ä–º—ã

`resources/views/payments/bulk-create.blade.php`

```blade
@extends('layouts.app')

@section('content')
<div class="container">
    <h2 class="mb-4">–ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –º–µ—Å—è—Ü</h2>

    <form method="POST" action="{{ route('payments.bulk.store') }}">
        @csrf

        {{-- –í–µ—Ä—Ö–Ω–∏–µ –ø–æ–ª—è --}}
        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
                <select name="apartment_id" class="form-select" required>
                    @foreach($apartments as $apartment)
                        <option value="{{ $apartment->id }}"
                            {{ $apartmentId == $apartment->id ? 'selected' : '' }}>
                            {{ $apartment->name }} ‚Äî {{ $apartment->address }}
                        </option>
                    @endforeach
                </select>
            </div>

            <div class="col-md-4">
                <label class="form-label">–î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞</label>
                <input type="date"
                       name="payment_date"
                       class="form-control"
                       value="{{ $paymentDate }}"
                       required>
            </div>
        </div>

        {{-- –¢–∞–±–ª–∏—Ü–∞ —É—Å–ª—É–≥ --}}
        <table class="table table-bordered">
            <thead class="table-light">
                <tr>
                    <th>–£—Å–ª—É–≥–∞</th>
                    <th width="200">–°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞</th>
                </tr>
            </thead>
            <tbody>
                @foreach($services as $i => $service)
                    <tr>
                        <td>{{ $service->name }}</td>
                        <td>
                            <input type="hidden"
                                   name="payments[{{ $i }}][service]"
                                   value="{{ $service->id }}">

                            <input type="number"
                                   step="0.01"
                                   min="0"
                                   class="form-control"
                                   name="payments[{{ $i }}][amount]"
                                   placeholder="‚Äî">
                        </td>
                    </tr>
                @endforeach
            </tbody>
        </table>

        <div class="text-end">
            <button class="btn btn-success">
                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏
            </button>
        </div>

    </form>
</div>
@endsection
```

---

# ‚úÖ –®–ê–ì 4. –ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ —Ñ–æ—Ä–º—ã

### –í–æ –≤–∫–ª–∞–¥–∫–µ **¬´–ü–ª–∞—Ç–µ–∂–∏¬ª** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã:

```blade
<a href="{{ route('payments.bulk.create', [
        'apartment_id' => $apartment->id
    ]) }}"
   class="btn btn-primary mb-3">
    üí≥ –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ –º–µ—Å—è—Ü
</a>
```

---

# üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è:

‚úî –º–∞—Å—Å–æ–≤—ã–π –≤–≤–æ–¥ –ø–ª–∞—Ç–µ–∂–µ–π
‚úî 1 –¥–∞—Ç–∞ ‚Üí –º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π
‚úî –º–∏–Ω–∏–º—É–º –¥–µ–π—Å—Ç–≤–∏–π
‚úî –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
‚úî UX –∫–∞–∫ —É –±–∞–Ω–∫–æ–≤

---

## üîú –°–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥

1Ô∏è‚É£ **–ê–≤—Ç–æ–∑–∞—á—ë—Ç –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –¥–æ–ª–≥–∞–º**
2Ô∏è‚É£ **–ò–º–ø–æ—Ä—Ç –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –≤—ã–ø–∏—Å–∫–∏ (CSV)**
3Ô∏è‚É£ **–¢–∞—Ä–∏—Ñ—ã + –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–∏**
4Ô∏è‚É£ **Excel-—ç–∫—Å–ø–æ—Ä—Ç**

–ì–æ—Ç–æ–≤ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏ –Ω–æ–º–µ—Ä üöÄ

---

[–ü—Ä–µ–¥—ã–¥—É—â–∞—è —á–∞—Å—Ç—å](38.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](01.md) | [–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å](40.md)


